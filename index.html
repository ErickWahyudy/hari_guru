<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Selamat Hari Guru ‚Äî Kado Premium</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
<script src="https://unpkg.com/typeit@8.7.0/dist/index.umd.js"></script>
<style>
  :root{
    --bg1:#fff6f8; --pink:#ff4d6d; --gold:#d4af37; --deep:#541334; --card:#fff;
  }
  *{box-sizing:border-box}
  body{font-family:Montserrat,system-ui,Segoe UI,Arial; margin:0; background:radial-gradient(circle at top left,#ffeef2,#fff6f8 40%,#fff 100%); color:var(--deep); min-height:100vh;}

  /* Header */
  .wrap{max-width:980px;margin:0 auto;padding:36px 20px;text-align:center}
  h1{font-size:40px;margin:6px 0 8px}
  p.lead{margin:0 0 18px;color:rgba(84,19,52,.85)}

  /* Card */
  .card{background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,250,250,0.9)); border-radius:18px; padding:28px; box-shadow:0 10px 30px rgba(84,19,52,.06);}

  .btn{display:inline-block;padding:12px 28px;border-radius:40px;font-weight:700;border:none;cursor:pointer}
  .btn-primary{background:var(--pink);color:#fff;box-shadow:0 8px 18px rgba(255,77,109,.18)}
  .btn-gift{background:linear-gradient(90deg,var(--gold),#ffd966); color:#3a1f00;margin-left:12px;border:2px solid rgba(0,0,0,.03)}

  /* message box */
  #message{margin-top:20px;font-size:18px;line-height:1.6;display:none}

  /* premium gift box */
  .stage{position:relative;margin-top:26px;height:360px}
  .gift-wrap{position:relative;width:220px;height:160px;margin:0 auto;transform-origin:center;}
  .gift-base{position:absolute;left:0;right:0;margin:auto;bottom:0;width:220px;height:120px;background:linear-gradient(180deg,#ffdede,#ffecec);border-radius:10px;border:4px solid rgba(212,175,55,.18);box-shadow:0 18px 40px rgba(84,19,52,.06);z-index:30}
  .gift-lid{position:absolute;left:-6px;right:-6px;margin:auto;top:-18px;width:232px;height:70px;background:linear-gradient(180deg,#fff0f4,#ffe6ec);border-radius:12px 12px 6px 6px;border:4px solid rgba(212,175,55,.18);transform-origin:50% 100%;z-index:40;box-shadow:0 8px 30px rgba(84,19,52,.06)}
  /* ribbon */
  .ribbon{position:absolute;left:50%;top:18px;width:110px;height:40px;margin-left:-55px;display:flex;justify-content:center;align-items:center;z-index:45}
  .bow{width:32px;height:32px;border-radius:6px;background:linear-gradient(135deg,var(--gold),#f7dd7a);box-shadow:0 6px 18px rgba(212,175,55,.25);position:relative}
  .bow::before,.bow::after{content:'';position:absolute;width:22px;height:10px;background:linear-gradient(135deg,var(--pink),#ffb2c0);border-radius:10px;transform-origin:left center}
  .bow::before{left:-22px;top:6px;transform:rotate(-25deg)}
  .bow::after{right:-22px;top:6px;transform:rotate(25deg)}
  .ribbon-stripe{position:absolute;left:0;right:0;margin:auto;top:0;height:12px;background:linear-gradient(90deg,#ffd966,#f4c84a);border-radius:6px}

  /* confetti container */
  .confetti-piece{position:absolute;width:10px;height:16px;opacity:0;transform-origin:center;z-index:60}

  /* flower stage center */
  .flower-stage{position:absolute;left:50%;top:30%;transform:translateX(-50%);width:280px;height:320px;pointer-events:none;display:none;z-index:70}

  /* === UPGRADED FLOWER VISUAL (Level 2) === */

  /* GOLD PARTICLES */
  .gold-dust {
    position: absolute;
    pointer-events: none;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: radial-gradient(circle, #ffe9a3 0%, #ffdb6e 40%, transparent 70%);
    filter: blur(1px);
    opacity: 0;
    z-index:85;
  }

  /* FLARE AURA */
  .flare-center {
    position:absolute;
    left:50%;
    bottom:210px;
    width:180px; height:180px;
    transform:translateX(-50%);
    border-radius:50%;
    background:radial-gradient(circle, rgba(255,180,200,.55), rgba(255,100,150,.15), transparent 70%);
    filter: blur(20px);
    opacity:0;
    z-index:72;
    pointer-events:none;
  }

  /* BLOOM AURA (soft mist) */
  .bloom-aura {
    position:absolute;
    left:50%;
    bottom:180px;
    transform:translateX(-50%);
    width:260px; height:260px;
    background:radial-gradient(circle, rgba(255,190,220,.22), rgba(255,150,190,.10), transparent 70%);
    filter: blur(35px);
    opacity:0;
    pointer-events:none;
    z-index:71;
  }

  /* stem & root (upgraded look) */
  .root{position:absolute;left:50%;bottom:10px;transform:translateX(-50%);width:10px;height:0;background:linear-gradient(180deg,#704830,#3e2a1e);border-radius:6px;opacity:0;filter:drop-shadow(0 3px 6px rgba(0,0,0,.25));}
  .stem{position:absolute;left:50%;bottom:10px;transform:translateX(-50%);width:8px;height:0;background:linear-gradient(180deg,#4da65a,#8fd89c,#58b06b);border-radius:6px;opacity:0;filter:drop-shadow(0 3px 6px rgba(0,0,0,.18));}

  /* leaves upgraded */
  .leaf{position:absolute;width:0;height:0;opacity:0;filter:drop-shadow(0 6px 10px rgba(0,0,0,.15));}
  .leaf.left{left:calc(50% - 32px);bottom:95px;background:radial-gradient(circle at 20% 50%, #e5ffe9 0%, #8bdca2 40%, #4fa666 100%);border-radius:40px 12px 40px 12px}
  .leaf.right{left:calc(50% + 8px);bottom:95px;background:radial-gradient(circle at 80% 50%, #e5ffe9 0%, #8bdca2 40%, #4fa666 100%);border-radius:12px 40px 12px 40px}

  /* bud upgraded */
  .bud{position:absolute;left:50%;bottom:170px;transform:translateX(-50%) scale(.2);width:76px;height:76px;border-radius:50%;background:radial-gradient(circle at 50% 30%, #fff5fa 0%, #ffb6ca 50%, #ff5d85 100%);box-shadow:inset 0 6px 14px rgba(255,255,255,.55),inset 0 -6px 14px rgba(255,60,110,.25),0 12px 30px rgba(255,120,160,.35);opacity:0;display:flex;align-items:center;justify-content:center;z-index:74}

  /* petals upgraded */
  .petal{position:absolute;width:64px;height:92px;background:radial-gradient(circle at 50% 20%, #fff7fb 0%, #ffccda 40%, #ff7997 80%, #ff4b6e 100%);border-radius:55% 55% 60% 60%;opacity:0;transform-origin:bottom center;filter:drop-shadow(0 10px 20px rgba(255,100,140,.35));box-shadow:inset 0 8px 15px rgba(255,255,255,.55),inset 0 -6px 12px rgba(255,50,120,.3),0 12px 25px rgba(255,120,150,.25);perspective:800px;transform-style:preserve-3d;z-index:73}

/* petal pseudo highlight for 3D curve */
.petal::after{content:"";position:absolute;width:100%;height:100%;border-radius:inherit;background:inherit;transform:rotateX(22deg);opacity:.7;filter:blur(2px);}

/* petals positions (refined) */
.petal.p1{left:50%;bottom:200px;transform:translateX(-50%) rotate(0deg)}
.petal.p2{left:50%;bottom:200px;transform:translateX(-50%) rotate(72deg)}
.petal.p3{left:50%;bottom:200px;transform:translateX(-50%) rotate(144deg)}
.petal.p4{left:50%;bottom:200px;transform:translateX(-50%) rotate(216deg)}
.petal.p5{left:50%;bottom:200px;transform:translateX(-50%) rotate(288deg)}

  /* upgraded animations */
  @keyframes riseRoot{from{height:0;opacity:0}to{height:48px;opacity:1}}
  @keyframes growStem{from{height:0;opacity:0}to{height:170px;opacity:1}}
  @keyframes leafIn{from{transform:scale(.2) rotate(-20deg);opacity:0}to{transform:scale(1) rotate(0);opacity:1}}
  @keyframes budUp{0%{transform:translateX(-50%) translateY(20px) scale(.2);opacity:0}50%{opacity:1}100%{transform:translateX(-50%) translateY(0) scale(1);opacity:1}}
  @keyframes petalOpen{0%{transform:translateX(-50%) rotate(var(--rot)) scale(.12) rotateX(70deg);opacity:0;filter:blur(6px)} 50%{opacity:1;filter:blur(1px)} 100%{transform:translateX(-50%) rotate(var(--rot)) scale(1) rotateX(0deg);opacity:1;filter:blur(0)}}

  /* show flower */
  .root.grow{animation:riseRoot .6s ease forwards}
  .stem.grow{animation:growStem 1.1s ease forwards}
  .leaf.grow{animation:leafIn .7s ease forwards}
  .bud.grow{animation:budUp .6s .3s cubic-bezier(.2,.9,.2,1) forwards}
  .petal.grow{animation:petalOpen .8s .5s cubic-bezier(.2,.9,.2,1) forwards}

  /* shimmer + breathing */
  .petal { animation: shimmer 4s ease-in-out infinite alternate; }
  @keyframes shimmer { 0% { filter:brightness(1) drop-shadow(0 0 8px rgba(255,140,160,.25)); } 100% { filter:brightness(1.12) drop-shadow(0 0 14px rgba(255,170,200,.35)); } }
  .flower-breath { animation: breathe 5s ease-in-out infinite; }
  @keyframes breathe { 0% { transform:translateX(-50%) scale(1); } 50% { transform:translateX(-50%) scale(1.04); } 100% { transform:translateX(-50%) scale(1); } }

  /* small responsive */
  @media (max-width:520px){.gift-wrap{transform:scale(.85)} .flower-stage{width:220px;height:260px}}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>Selamat Hari Guru üå∏</h1>
    <p class="lead">Terima kasih atas pengabdian dan kasih sayangmu. Buka pesannya, lalu berikan kado spesial.</p>

    <div>
      <button id="btnOpen" class="btn btn-primary">Buka Pesan</button>
      <button id="btnGift" class="btn btn-gift" style="display:none">üéÅ Buka Kado</button>
    </div>

    <div id="message" aria-live="polite"></div>

    <div class="stage" aria-hidden="true">
      <div class="gift-wrap" id="giftWrap">
        <div class="gift-lid" id="giftLid"></div>
        <div class="ribbon">
          <div class="ribbon-stripe"></div>
          <div class="bow"></div>
        </div>
        <div class="gift-base"></div>
      </div>

      <!-- confetti container (we'll inject pieces) -->

      <div class="flower-stage" id="flowerStage">
        <!-- Added Level-2 elements -->
        <div class="bloom-aura"></div>
        <div class="flare-center"></div>

        <div class="root" id="rootEl"></div>
        <div class="stem" id="stemEl"></div>
        <div class="leaf left" id="leafL"></div>
        <div class="leaf right" id="leafR"></div>
        <div class="bud" id="budEl"></div>
        <div class="petal p1" id="p1"></div>
        <div class="petal p2" id="p2"></div>
        <div class="petal p3" id="p3"></div>
        <div class="petal p4" id="p4"></div>
        <div class="petal p5" id="p5"></div>
      </div>

    </div>

  </div>
</div>

<!-- Audio: autoplay + gesture fallback -->
<audio id="bgm" src="https://feeldreams.github.io/terbangjauh.mp3" loop></audio>

<script>
// Play audio with fallback (browsers block autoplay sometimes)
const bgm = document.getElementById('bgm');
function tryPlayAudio(){ bgm.play().catch(()=>{/* will play after user interaction */}); }
tryPlayAudio();

// TypeIt message sequence (use TypeIt v8 events)
const btnOpen = document.getElementById('btnOpen');
const btnGift = document.getElementById('btnGift');
const message = document.getElementById('message');

btnOpen.addEventListener('click', ()=>{
  // ensure audio played on user gesture
  try{ bgm.play(); }catch(e){}
  btnOpen.disabled=true; btnOpen.style.opacity=.6;
  // show typing messages
  message.style.display='block';
  message.innerHTML = '';

  new TypeIt(message, {
    speed:45,
    lifeLike:true,
    cursor:true
  })
  .type('Terima kasih telah menjadi inspirasi dan penuntun kami.')
  .pause(700).break()
  .type('Setiap ilmu dan nasehatmu menjadi bekal yang tak ternilai.')
  .pause(700).break()
  .type('Semoga selalu sehat, bahagia, dan penuh semangat mengajar.')
  .pause(800).break()
  .type('Klik \"Buka Kado\" untuk kejutan spesial üéÅ')
  .go();
  // show gift button after typing
  setTimeout(()=>{ btnGift.style.display='inline-block'; }, 7200);
  
});

// Gift opening sequence (type C: box wiggle -> lid open -> ribbon flies -> confetti -> flower grow)
btnGift.addEventListener('click', ()=>{
  try{ bgm.play(); }catch(e){}
  btnGift.disabled=true; btnGift.style.opacity=.6;
  const gift = document.getElementById('giftWrap');
  const lid = document.getElementById('giftLid');
  const ribbon = document.querySelector('.ribbon');
  const flowerStage = document.getElementById('flowerStage');

  // wiggle animation
  gift.animate([
    {transform:'translateY(0) rotate(0)'},
    {transform:'translateY(-6px) rotate(-2deg)'},
    {transform:'translateY(0) rotate(2deg)'},
    {transform:'translateY(-4px) rotate(-1deg)'},
    {transform:'translateY(0) rotate(0)'}
  ],{duration:700,iterations:1,easing:'ease-out'});

  // after short delay: animate lid open
  setTimeout(()=>{
    lid.style.transition='transform .9s cubic-bezier(.2,.9,.2,1), opacity .4s';
    lid.style.transform='translateY(-120px) rotateX(25deg)';
    lid.style.opacity='0';
  },750);

  // ribbon flies off (simulate with translate)
  setTimeout(()=>{
    ribbon.style.transition='transform .9s cubic-bezier(.2,.9,.2,1), opacity .6s';
    ribbon.style.transform='translateY(-220px) scale(.3) rotate(-20deg)';
    ribbon.style.opacity='0';
  },920);

  // confetti burst
  setTimeout(()=>{
    createConfettiBurst();
  },1100);

  // show flower stage after confetti
  setTimeout(()=>{
    flowerStage.style.display='block';
    startFlowerAnimation();
  },1500);

});

// Confetti creation (simple colored divs flying)
function createConfettiBurst(){
  const colors = ['#ffd166','#ff6b6b','#f7aef8','#9be7ff','#ffd1dc'];
  const pieces = 28;
  for(let i=0;i<pieces;i++){
    const c = document.createElement('div');
    c.className='confetti-piece';
    c.style.width = (8 + Math.random()*8) + 'px';
    c.style.height = (10 + Math.random()*12) + 'px';
    c.style.background = colors[Math.floor(Math.random()*colors.length)];
    c.style.left = (50 + (Math.random()-0.5)*80) + '%';
    c.style.top = (30 + (Math.random()-0.5)*10) + '%';
    c.style.opacity=1;
    c.style.zIndex = 90;
    document.body.appendChild(c);

    // random trajectory
    const dx = (Math.random()-0.5)*800;
    const dy = Math.random()*600+200;
    const rot = Math.random()*720;
    c.animate([
      {transform:`translate(0,0) rotate(0deg)`, opacity:1},
      {transform:`translate(${dx}px, ${dy}px) rotate(${rot}deg)`, opacity:0}
    ],{duration:1800+Math.random()*800,easing:'cubic-bezier(.2,.9,.2,1)'});

    // remove after
    setTimeout(()=>c.remove(),3000);
  }
}

/* GOLD PARTICLE SPAWNER (Level 2) */
function spawnGoldenDust(){
  for (let i = 0; i < 36; i++) {
    const d = document.createElement("div");
    d.className = "gold-dust";
    const x = 50 + (Math.random() - 0.5) * 40;
    const y = 200 + (Math.random() * 60);
    d.style.left = x + "%";
    d.style.bottom = y + "px";
    d.style.opacity = 1;
    document.body.appendChild(d);

    const dx = (Math.random() - 0.5) * 260;
    const dy = 60 + Math.random() * 220;
    const rot = Math.random() * 360;

    d.animate([
      { transform:`translate(0,0) rotate(0deg)`, opacity: 1 },
      { transform:`translate(${dx}px, ${dy}px) rotate(${rot}deg)`, opacity: 0 }
    ], {
      duration: 2200 + Math.random() * 1400,
      easing: "cubic-bezier(.2,.9,.2,1)"
    });

    setTimeout(() => d.remove(), 3800);
  }
}

// Flower animation sequence (CSS classes toggled)
function startFlowerAnimation(){
  const root = document.getElementById('rootEl');
  const stem = document.getElementById('stemEl');
  const leafL = document.getElementById('leafL');
  const leafR = document.getElementById('leafR');
  const bud = document.getElementById('budEl');
  const p1 = document.getElementById('p1');
  const p2 = document.getElementById('p2');
  const p3 = document.getElementById('p3');
  const p4 = document.getElementById('p4');
  const p5 = document.getElementById('p5');
  const aura = document.querySelector('.bloom-aura');
  const flare = document.querySelector('.flare-center');

  // style leaves shapes with JS (kept, but sizes adjusted earlier via CSS)
  leafL.style.width='64px'; leafL.style.height='36px';
  leafL.style.borderRadius='40px 12px 40px 12px';
  leafR.style.width='64px'; leafR.style.height='36px';
  leafR.style.borderRadius='12px 40px 12px 40px';

  // petals base shape (set rotation variable)
  [p1,p2,p3,p4,p5].forEach((el,i)=>{
    el.style.setProperty('--rot', (i*72)+'deg');
    el.style.left='50%';
    el.style.bottom='200px';
    el.style.marginLeft='-32px';
  });

  // sequence timings (enhanced)
  setTimeout(()=>{ root.classList.add('grow'); }, 120);
  setTimeout(()=>{ stem.classList.add('grow'); }, 800);
  setTimeout(()=>{ leafL.classList.add('grow'); leafR.classList.add('grow'); }, 1500);
  setTimeout(()=>{ bud.classList.add('grow'); }, 2200);
  // petals (staggered, slower for cinematic)
  setTimeout(()=>{ p1.classList.add('grow'); }, 2600);
  setTimeout(()=>{ p2.classList.add('grow'); }, 2800);
  setTimeout(()=>{ p3.classList.add('grow'); }, 3000);
  setTimeout(()=>{ p4.classList.add('grow'); }, 3200);
  setTimeout(()=>{ p5.classList.add('grow'); }, 3400);

  // after petals opened: aura, flare, golden dust, breathing
  setTimeout(()=>{
    // show aura + flare gently
    if(aura) { aura.style.transition = 'opacity .8s ease'; aura.style.opacity = 1; }
    if(flare) { flare.style.transition = 'opacity .6s ease'; flare.style.opacity = 0.9;
      flare.animate([
        { transform:'translateX(-50%) scale(.2)', opacity:0 },
        { transform:'translateX(-50%) scale(1.25)', opacity:.85 },
        { transform:'translateX(-50%) scale(1)', opacity:.6 }
      ], { duration:900, easing:'ease-out' });
    }

    // spawn golden dust particles
    spawnGoldenDust();

    // breathing/pulse effect on bud and petals
    bud.classList.add('flower-breath');
    [p1,p2,p3,p4,p5].forEach(el=> el.classList.add('flower-breath'));

    // final gentle bounce of bud
    const budEl = document.getElementById('budEl');
    budEl.animate([
      {transform:'translateX(-50%) scale(1)'},
      {transform:'translateX(-50%) scale(1.045)'},
      {transform:'translateX(-50%) scale(1)'}
    ],{duration:1000,iterations:2});
  }, 3800);

  // final visual polish: add subtle glow to petals
  setTimeout(()=>{
    [p1,p2,p3,p4,p5].forEach(el=>{
      el.style.boxShadow='0 18px 40px rgba(255,120,160,.25)';
    });
  },4300);
}
</script>
</body>
</html>
